<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Puppet Docs</title>
    <link rel="stylesheet" type="text/css" href="../../files/stylesheets/style.css" media="all"/>
    <link rel="stylesheet" type="text/css" href="../../files/stylesheets/syntax.css" media="all"/>
  <script type="text/javascript" src="../../files/javascripts/guides.js"></script>
  <!-- <script type="text/javascript" src="../../files/javascripts/code_highlighter.js"></script><script type="text/javascript" src="../../files/javascripts/highlighters.js"></script> --></head>
  <body class="guide">
    <div id="topNav">
      <div class="wrapper">
        <strong>More at <a href="http://reductivelabs.com/">reductivelabs.com:</a> </strong>
        <a href="http://projects.reductivelabs.com/">Issue Tracker</a>
      </div>
    </div>
    <div id="header">
      <div class="wrapper clearfix">
        <h1><a href="../../index.html" title="Return to home page">docs.reductivelabs.com</a></h1>
        <p class="hide"><a href="#mainCol">Skip navigation</a>.</p>
        <ul class="nav">
          <li><a href="../../index.html">Home</a></li>
          <li class="index"><a href="index.html" onclick="guideMenu(); return false;" id="guidesMenu">Docs Index</a>
          <div id="index-dialog" class="clearfix" style="display: none;">
            <hr />
            <dl class="L">
              <dt>Guides</dt>
              <dd><a href="../../introduction.html">An Introduction to Puppet</a></dd>
              <dd><a href="../../installation.html">Installing Puppet</a></dd>
              <dd><a href="../../language_tutorial.html">Puppet Language Tutorial</a></dd>
            </dl>
            <dl class="R">
              <dt>References</dt>
              <dd><a href="../../types/">Resource Types (Categorized)</a></dd>
              <dd><a href="../../types/alphabetical_index.html">Resource Types (Alphabetical)</a></dd>
            </dl>
          </div>
          </li>
          <li><a href="contribute.html">Contribute</a></li>
        </ul>
      </div>
    </div>
    <hr class="hide" />

    <div id="feature">
      <div class="wrapper">
        <h1 id='augeas'>augeas</h1>

<p>Apply the changes (single or array of changes) to the filesystem via the <a href='http://augeas.net'>augeas</a> tool.</p>

<ul>
<li>Safely manipulate configuration files</li>

<li>Supports <a href='http://www.augeas.net'>augeas</a>&#8217; domain-specific language to describe file formats</li>
</ul>
        
              <div id="subCol">
        <h3 class="chapter"><img src="../../images/chapters_icon.gif" alt="" />Contents</h3>
        <ol class="chapters">
<li><a href="#requirements">Requirements</a></li>
<li><a href="#platforms">Platforms</a></li>
<li><a href="#version_compatibility">Version Compatibility</a></li>
<li><a href="#examples">Examples</a></li>
<li>
<a href="#parameters">Parameters</a><ul style="list-style: none;">
<li>
<a href="#id1"><code>changes</code></a><ul style="list-style: none;">
<li><a href="#id2"><code>set</code></a></li>
<li><a href="#id3"><code>rm</code></a></li>
<li><a href="#id4"><code>clear</code></a></li>
<li><a href="#id5"><code>ins</code></a></li>
</ul>
</li>
<li><a href="#id6"><code>context</code></a></li>
<li><a href="#id7"><code>force</code></a></li>
<li><a href="#id8"><code>load_path</code></a></li>
<li><a href="#id9"><code>name</code></a></li>
<li><a href="#id10"><code>onlyif</code></a></li>
<li>
<a href="#id11"><code>provider</code></a><ul style="list-style: none;"><li><a href="#id12"><code>augeas</code></a></li></ul>
</li>
<li><a href="#id13"><code>returns</code></a></li>
<li><a href="#id14"><code>root</code></a></li>
<li><a href="#id15"><code>type_check</code></a></li>
</ul>
</li></ol></div>
      </div>
    </div>
    
    <div id="container">
      <div class="wrapper">
        <div id="mainCol">
          <h2 id='requirements'>Requirements</h2>

<ul>
<li><a href='http://www.augeas.net'>augeas</a></li>

<li>The <a href='http://augeas.net/download.html#ruby-bindings'>ruby-augeas</a> binding</li>
</ul>

<h2 id='platforms'>Platforms</h2>

<p>Same as <a href='http://www.augeas.net'>augeas</a>.</p>

<h2 id='version_compatibility'>Version Compatibility</h2>
<div class='warning'><p>This section has not been completed.</p></div>
<h2 id='examples'>Examples</h2>

<p>Sample usage with a string:</p>

<pre><code>augeas{&quot;test1&quot;:
       context =&gt; &quot;/files/etc/sysconfig/firstboot&quot;,
       changes =&gt; &quot;set RUN_FIRSTBOOT YES&quot;,
       onlyif  =&gt; &quot;match other_value size &gt; 0&quot;,
 }</code></pre>

<p>Sample usage with an array and custom lenses:</p>

<pre><code>augeas{&quot;jboss_conf&quot;:
    context =&gt; &quot;/files&quot;,
    changes =&gt; [
        &quot;set /etc/jbossas/jbossas.conf/JBOSS_IP $ipaddress&quot;,
        &quot;set /etc/jbossas/jbossas.conf/JAVA_HOME /usr&quot;
    ],
    load_path =&gt; &quot;$/usr/share/jbossas/lenses&quot;,
}</code></pre>

<h2 id='parameters'>Parameters</h2>

<h3 id='id16'><code>changes</code></h3>

<p>The changes which should be applied to the filesystem. This can be either a string which contains a command or an array of commands.</p>

<p>Commands supported are:</p>

<h4 id='id17'><code>set</code></h4>

<dl>
<dt><code>set [PATH] [VALUE]</code></dt>

<dd>Sets the value <code>VALUE</code> at loction <code>PATH</code></dd>
</dl>

<h4 id='id18'><code>rm</code></h4>

<dl>
<dt><code>rm [PATH]</code></dt>

<dd>Removes the node at location <code>PATH</code></dd>
</dl>
<div class='note'><p>You can also use the synonym <code>remove</code>.</p></div>
<h4 id='id19'><code>clear</code></h4>

<dl>
<dt><code>clear [PATH]</code></dt>

<dd>Keeps the node at PATH, but removes the value</dd>
</dl>

<h4 id='id20'><code>ins</code></h4>

<dl>
<dt><code>ins [LABEL] [WHERE] [PATH]</code></dt>

<dd>Inserts an empty node LABEL either <code>WHERE={before|after} PATH</code></dd>
</dl>
<div class='note'><p>You can also use the synonym <code>insert</code>.</p></div>
<h3 id='id21'><code>context</code></h3>

<p>Optional context path. This value is pre-pended to the paths of all changes if the path is relative. So a path specified as <code>/files/foo</code> will not be prepended with the context while <code>files/foo</code> will be prepended</p>

<h3 id='id22'><code>force</code></h3>

<p>Optional command to force the augeas type to execute even if it thinks changes will not be made. This does not overide the only setting. If onlyif is set, then the foce setting will not override that result</p>

<h3 id='id23'><code>load_path</code></h3>

<p>Optional colon separated list of directories; these directories are searched for schema definitions</p>

<h3 id='id24'><code>name</code></h3>

<p>The name of this task. Used for uniqueness.</p>
<div class='info'><p>This is the <code>namevar</code> for this resource type.</p></div>
<h3 id='id25'><code>onlyif</code></h3>

<p>Optional augeas command and comparisons to control the execution of this type.</p>

<p>Supported <code>onlyif</code> syntax:</p>

<ul>
<li><code>get [AUGEAS_PATH] [COMPARATOR] [STRING]</code></li>

<li><code>match [MATCH_PATH] size [COMPARATOR] [INT]</code></li>

<li><code>match [MATCH_PATH] include [STRING]</code></li>

<li><code>match [MATCH_PATH] == [AN_ARRAY]</code></li>

<li><code>match [MATCH_PATH] != [AN_ARRAY]</code></li>
</ul>

<p>where:</p>

<ul>
<li><code>AUGEAS_PATH</code>: is a valid path scoped by the context</li>

<li><code>MATCH_PATH</code>: is a valid match synatx scoped by the context</li>

<li><code>COMPARATOR</code>: is in the set <code>[&gt; &gt;= != == &lt;= &lt;]</code></li>

<li><code>STRING</code>: is a string</li>

<li><code>INT</code>: is a number</li>

<li><code>AN_ARRAY</code>: is in the form <code>[&#39;a string&#39;, &#39;another&#39;]</code></li>
</ul>

<h3 id='id26'><code>provider</code></h3>

<p>The specific backend for provider to use. You will seldom need to specify this &#8211; Puppet will usually discover the appropriate provider for your platform. Available providers are:</p>

<h4 id='id27'><code>augeas</code></h4>

<p>Supports the following features:</p>

<dl>
<dt><code>execute_changes</code></dt>

<dd>Actually make the changes</dd>

<dt><code>need_to_run?</code></dt>

<dd>If the command should run</dd>

<dt><code>parse_commands</code></dt>

<dd>Parse the command string</dd>
</dl>

<h3 id='id28'><code>returns</code></h3>

<p>The expected return code from the augeas command.</p>
<div class='warning'><p>This is used internally by Puppet and should not be set.</p></div>
<h3 id='id29'><code>root</code></h3>

<p>A file system path; all files loaded by Augeas are loaded underneath <code>ROOT</code></p>

<h3 id='id30'><code>type_check</code></h3>

<p>Set to true if augeas should perform typechecking.</p>

<p>NOTE: Optional, defaults to <code>false</code>. Valid values are <code>true</code> and <code>false</code>.</p>
        </div>
      </div>
    </div>
    
    <hr class="hide" />
    
    <div id="footer">
      <div class="wrapper">
        <p>&copy; 2009 Reductive Labs.</p>
        <p>This work is licensed under a <a href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-Share Alike 3.0</a> License.</p>
        <p>The documentation format are based on the &#8220;Rails Guides&#8221; project by the Ruby on Rails community.</p> 
      </div>
    </div>

  </body>
</html>